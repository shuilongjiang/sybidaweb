<!DOCTYPE html>
<html lang="ch">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/sybida/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/sybida/bs/bootstrap.min.css">
    <script src="/sybida/common/js/locahostadress.js" charset="utf-8"></script>
    <style>
        html, body, div, ul, li, h1, h2, h3, h4, h5, h6, p, dl, dt, dd, ol, form, input, textarea, th, td, select {
            margin: 0;
            padding: 0;
        }

        #advicetitlebig{
            border-top: none;
            border-bottom: 2px solid #25bb9b;
            width: 100%;
        }
        .advicetitleshow{
            height: 42px;
            line-height: 42px;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
            background: #ffffff;
            color: black;
            width: 50%;
            float: left;
         }
        .advicetitleshow1{
            height: 42px;
            line-height: 42px;
            font-size: 18px;
            font-weight: 500;
            text-align: center;
            background: #ffffff;
            color: black;
            width: 50%;
            float: left;
        }

        .onadvicetitle{
            background: #25bb9b;
            color: #fff;
        }
        .infolist{
            width: 95%;
            border-bottom: 2px solid #ECECEC;
        }
        .onlinght{
            transform: scale(1.01,1.01);
            box-shadow: 0 0 1px #0000ff;
            cursor: pointer;
        }
        .showmessage{
            display: block;
        }
        .hiddenmessage{
            display: none;
        }
    </style>
</head>
<body>
<div class="container" style="margin-top: 20px;">
    <div  style="border: 1px solid #ECECEC;width: 80%;margin: 0 auto;">

        <div id="advicetitlebig" >
            <a href="#">
                <div class="advicetitleshow onadvicetitle"  id="receiveinfo">
                收件箱
                </div>
            </a>
            <a href="#" >
                <div class="advicetitleshow1" id="sendedinfo" >
                   已发送
                </div>
            </a>
            <div style="clear: both"></div>
        </div>
        <div id="showmseeage" class="showmessage" >
            <div class="infolist" >
                查看信息
            </div>
        </div>
        <div id="sendmessage" class="hiddenmessage">

        </div>
     <span id="nothingtodo"></span>
    </div>
</div>
</body>
<script src="/sybida/jquery/jquery-3.3.1.min.js"></script>
<script src="/sybida/layui/layui.js" charset="utf-8"></script>
<script src="/sybida/bs/bootstrap.min.js"></script>
<script>
    $(".advicetitleshow").mouseover(function () {
        var class1=$(this).attr("class")

        $(this).addClass("onlinght")
    })
    $(".advicetitleshow").mouseleave(function () {

        $(this).removeClass("onlinght")
    })
    $(".advicetitleshow1").mouseover(function () {
        var class1=$(this).attr("class")

        $(this).addClass("onlinght")
    })
    $(".advicetitleshow1").mouseleave(function () {

        $(this).removeClass("onlinght")
    })
    $(".advicetitleshow").click(function () {
        var class1=$(this).attr("class")
        if("advicetitleshow onlinght"==class1){
            $(this).toggleClass("onadvicetitle")
            $(".advicetitleshow1").removeClass("onadvicetitle")
            $("#showmseeage").removeClass("hiddenmessage")
            $("#showmseeage").toggleClass("showmessage")
            $("#sendmessage").removeClass("showmessage")
            $("#sendmessage").toggleClass("hiddenmessage")
        }else{

        }
    })
    $(".advicetitleshow1").click(function () {
        var class1=$(this).attr("class")
        if("advicetitleshow1 onlinght"==class1){
            $(this).toggleClass("onadvicetitle")
            $(".advicetitleshow").removeClass("onadvicetitle")
            $("#sendmessage").removeClass("hiddenmessage")
            $("#sendmessage").toggleClass("showmessage")
            $("#showmseeage").removeClass("showmessage")
            $("#showmseeage").toggleClass("hiddenmessage")
            sendmessagea();
        }else{
            sendmessagea();
        }
    })
</script>
<!-- page lazyloading -->
<script>


</script>
<script>
    function sendmessagea() {


      var userid=getCookie("userid")
       var totalPages=3;
       var pagenum=0;
        doSomething(pagenum)
       var C=10;

           $(window).scroll(function() {
               console.log("sss"+$("#sendmessage").height())
               var scrollTop = $("#sendmessage").scrollTop(),scrollHeight = $(document).height(),windowHeight = $("#sendmessage").height();
               var positionValue = (scrollTop + windowHeight) - scrollHeight;
               console.log(positionValue)
               if (positionValue >= -70) {
                   //do something
                   if (pagenum < totalPages - 1) {
                       pagenum++;
                       doSomething(pagenum);
                   } else {
                       $("#nothingtodo").html("没有更多了")
                   }
               }
           });



    function doSomething(pagenum) {

        var data1 = {
            pagesize: 10,
            pagenum: pagenum,
            userid:userid,
        };
        $.post(url+"news/hadsendmessage", data1, function (data) {
            var html =``
            for(var i = 0; i<data.data.length; i++){
                html+=`<div class="infolisted" style="">
                        ${data.data}<br>
                        ${data.data}<br>
                        </div>`
            }
            $("#sendmessage").append(html)
            console.log(data)
        },"json");
    }
    }
</script>
</html>